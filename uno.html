<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>unonono</title>
  <style>
    body {
      background-color: pink;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 20px;
    }
    .card {
      display: inline-block;
      margin: 5px;
      padding: 15px 20px;
      border-radius: 10px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      font-size: 20px;
      user-select: none;
    }
    .red { background-color: red; }
    .green { background-color: green; }
    .blue { background-color: blue; }
    .yellow { background-color: goldenrod; }

    #top-card-display {
      font-size: 24px;
      margin: 20px 0;
    }
    #top-card-graphic {
      display: inline-block;
      padding: 20px;
      border-radius: 15px;
      color: white;
      font-size: 36px;
      font-weight: bold;
    }

    #player-hand { margin-top: 20px; }
    #message { margin-top: 20px; font-size: 18px; min-height: 30px; }
    button {
      padding: 10px 20px;
      margin-top: 10px;
      font-size: 16px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
    }
    h2 { margin-top: 40px; }
  </style>
</head>
<body>
  <h1>tui bi·∫øt em ƒëang bu·ªìn ü•∫ n√™n tui s·∫Ω b√π ƒë·∫Øp cho em b·∫±ng c√°i c√πi b·∫Øp n√†y hehehehe</h1>

  <div id="top-card-display">
    l√° tr√™n c√πng:
    <div id="top-card-graphic"></div>
  </div>

  <h2>b√†i c·ªßa em n√®:</h2>
  <div id="player-hand"></div>
  <button onclick="drawCard()">hong c√≥ b√†i h·∫£, z b·ªëc b√†i i nha</button>

  <h2>b√†i c·ªßa tui, em hong ƒë∆∞·ª£c nh√¨n nha üò§</h2>
  <div id="bot-count">tui c√≤n <span id="bot-count-number"></span> l√° ü´¢</div>

  <div id="message"></div>

  <script>
    const colors = ['red', 'green', 'blue', 'yellow'];
    let playerHand = [];
    let botHand = [];
    let topCard = null;
    let usedCards = new Set();

    function generateUniqueCard(existingSet) {
      let card;
      let key;
      let tries = 0;
      do {
        const color = colors[Math.floor(Math.random() * colors.length)];
        const number = Math.floor(Math.random() * 10);
        card = { color, number };
        key = color + '-' + number;
        tries++;
        if (tries > 100) break; // fallback
      } while (existingSet.has(key));
      existingSet.add(key);
      return card;
    }

    function renderCard(card, index) {
      return `<div class="card ${card.color}" onclick="playCard(${index})">${card.number}</div>`;
    }

    function updateUI() {
      document.getElementById('player-hand').innerHTML = playerHand.map((c, i) => renderCard(c, i)).join('');
      document.getElementById('top-card-graphic').className = `card ${topCard.color}`;
      document.getElementById('top-card-graphic').innerText = topCard.number;
      document.getElementById('bot-count-number').innerText = botHand.length;
    }

    function playCard(index) {
      const card = playerHand[index];
      if (card.color === topCard.color || card.number === topCard.number) {
        topCard = card;
        playerHand.splice(index, 1);
        updateUI();

        if (playerHand.length === 0) {
          document.getElementById('message').innerText = 'em th·∫Øng r√πi ƒë√≥ yayayayayayya!!! ü•≥ü•≥ü•≥';
          setTimeout(initGame, 2000);
          return;
        }

        setTimeout(botTurn, 1000);
      } else {
        alert('l√° ƒë√≥ hong ƒë√°nh ƒë∆∞·ª£c ƒë√¢u em üò¢');
      }
    }

    function drawCard() {
      const newCard = generateUniqueCard(usedCards);
      playerHand.push(newCard);
      updateUI();

      const playable = playerHand.find(c => c.color === topCard.color || c.number === topCard.number);
      if (playable) {
        document.getElementById('message').innerText = 'em v·ª´a b·ªëc ƒë∆∞·ª£c l√° c√≥ th·ªÉ ƒë√°nh ƒë√≥ nha';
      } else {
        setTimeout(botTurn, 1000);
      }
    }

    function botTurn() {
      const playable = botHand.find(c => c.color === topCard.color || c.number === topCard.number);
      if (playable) {
        topCard = playable;
        botHand.splice(botHand.indexOf(playable), 1);
        document.getElementById('message').innerText = `tui ƒë√°nh 1 l√° b√≠ m·∫≠t, ƒë·ªë em bi·∫øt ƒë∆∞·ª£c üòå`;

        if (botHand.length === 0) {
          document.getElementById('message').innerText = 'tui th·∫Øng r√πi üò≠ nh∆∞ng tui v·∫´n th∆∞∆°ng ng∆∞·ªùi m√¨nh th·∫Øng nha';
          setTimeout(initGame, 2000);
          return;
        }
      } else {
        const drawn = generateUniqueCard(usedCards);
        botHand.push(drawn);
        document.getElementById('message').innerText = 'tui b·ªëc b√†i v√¨ h·ªïng c√≥ l√° ƒë·ªÉ ƒë√°nh ü•≤';
      }
      updateUI();
    }

    function initGame() {
      usedCards = new Set();
      playerHand = Array.from({ length: 5 }, () => generateUniqueCard(usedCards));
      botHand = Array.from({ length: 5 }, () => generateUniqueCard(usedCards));
      topCard = generateUniqueCard(usedCards);
      updateUI();
      document.getElementById('message').innerText = '';
    }


    window.onload = initGame;
  </script>
</body>
</html>
